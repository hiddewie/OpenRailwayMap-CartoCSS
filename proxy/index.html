<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="apple-touch-icon" sizes="180x180" href="image/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="image/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="image/favicon-16x16.png">
  <link rel="manifest" href="manifest.json">

  <link rel="stylesheet" href="css/bootstrap-5.3.3/bootstrap.min.css">
  <link rel="stylesheet" href="css/maplibre-gl-4.7/maplibre-gl.css">
  <link rel="stylesheet" href="css/ui.css">

  <script>
    // See https://stackoverflow.com/a/64158043/711129
    let FF_FOUC_FIX;
  </script>

  <title>OpenRailwayMap</title>
</head>

<body>
<div id="search-backdrop" class="modal backdrop" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Search</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="hideSearch()"></button>
      </div>
      <div class="modal-body">
        <ul class="nav nav-pills mb-2">
          <li class="nav-item">
            <a id="search-facilities-tab" class="nav-link active" href="javascript:searchFacilities()">Facilities</a>
          </li>
          <li class="nav-item">
            <a id="search-milestones-tab" class="nav-link" href="javascript:searchMilestones()">Milestones</a>
          </li>
        </ul>
        <form id="search-facilities-form">
          <div class="mb-3">
            <label class="form-label">Search by</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="type" id="search-all" value="all" checked>
                <label class="form-check-label" for="search-all">All</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="type" id="search-name" value="name">
                <label class="form-check-label" for="search-name">Name</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="type" id="search-ref" value="ref">
                <label class="form-check-label" for="search-ref">Reference</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="type" id="search-uic-ref" value="uic_ref">
                <label class="form-check-label" for="search-uic-ref">UIC reference</label>
              </div>
            </div>
          </div>
          <div class="input-group mb-3">
            <input type="search" id="facility-term" name="term" class="form-control" placeholder="Bruxelles, EAHS, 8000294" minlength="2" required>
            <button class="btn btn-success" type="submit">Search</button>
          </div>
        </form>
        <form id="search-milestones-form">
          <div class="row">
              <div class="col">
                <div class="input-group mb-3">
                  <label class="input-group-text" for="milestone-ref">Reference</label>
                  <input type="text" id="milestone-ref" name="ref" class="form-control" placeholder="6020" required>
                </div>
              </div>
              <div class="col">
                <div class="input-group mb-3">
                  <label class="input-group-text" for="milestone-position">Position</label>
                  <input type="number" id="milestone-position" name="position" class="form-control" placeholder="22.7" min="0" step="0.1" required>
                </div>
              </div>
              <div class="col flex-grow-0">
                <button class="btn btn-success" type="submit">Search</button>
              </div>
            </div>
        </form>
        <div id="search-results"></div>
      </div>
    </div>
  </div>
</div>
<div id="configuration-backdrop" class="modal backdrop" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Map configuration</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="hideConfiguration()"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="backgroundSaturation" class="form-label">Background map saturation</label>
            <input type="range" min="0.0" max="1.0" step="0.05" class="form-range" id="backgroundSaturation" onchange="updateConfiguration('backgroundSaturation', parseFloat(this.value)); updateBackgroundMapContainer();">
            <small class="form-text">
              Control the saturation of the background map. The smallest value makes the map grayscale, while the largest value makes the map full color.
            </small>
          </div>
          <div class="mb-3">
            <label for="backgroundOpacity" class="form-label" >Background map opacity</label>
            <input type="range" min="0.0" max="1.0" step="0.05" class="form-range" id="backgroundOpacity" onchange="updateConfiguration('backgroundOpacity', parseFloat(this.value)); updateBackgroundMapContainer();">
            <small class="form-text">
              Control the opacity of the background map. The smallest value makes the map transparent, while the largest value makes the map opaque.
            </small>
          </div>
          <div class="mb-3">
            <label for="backgroundUrl" class="form-label" >Background map tile URL</label>
            <div class="mb-1">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="backgroundType" id="backgroundTypeRaster" value="raster" checked onchange="updateConfiguration('backgroundType', 'raster'); updateBackgroundMapStyle();">
                <label class="form-check-label" for="backgroundTypeRaster">Raster</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="backgroundType" id="backgroundTypeVector" value="raster" onchange="updateConfiguration('backgroundType', 'vector'); updateBackgroundMapStyle();">
                <label class="form-check-label" for="backgroundTypeVector">Vector</label>
              </div>
            </div>
            <input type="url" required class="form-control" id="backgroundUrl" onchange="updateConfiguration('backgroundUrl', this.value); updateBackgroundMapStyle();">
            <small class="form-text">
              The tile URL for the background map.<br>
              Raster tiles: A URL serving raster tiles. See <a href="https://wiki.openstreetmap.org/wiki/Raster_tile_providers" target="_blank">the wiki</a> for a list of raster tile providers, for example <code>https://tile.openstreetmap.org/{z}/{x}/{y}.png</code>.<br>
              Vector tiles: A URL specifying a vector style. See <a href="https://wiki.openstreetmap.org/wiki/Vector_tiles#Providers" target="_blank">the wiki</a> for a list of vector tile providers, for example <code>https://americanamap.org/style.json</code>.
            </small>
          </div>
          <div class="mb-3">
            <label class="form-label">Theme</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="theme" id="themeSystem" value="system" checked onchange="onThemeChange('system');">
                <label class="form-check-label" for="themeSystem">System</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="theme" id="themeLight" value="light" onchange="onThemeChange('light');">
                <label class="form-check-label" for="themeLight">Light</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="theme" id="themeDark" value="dark" onchange="onThemeChange('dark');">
                <label class="form-check-label" for="themeDark">Dark</label>
              </div>
            </div>
            <small class="form-text">
              Control the theme of OpenRailwayMap. The default is to follow the system and browser preferences. A light or dark theme can also be configured.
            </small>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div id="news-backdrop" class="modal backdrop" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">News</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="hideNews()"></button>
      </div>
      <div class="modal-body news-content">
        <h4>
          Show a legend for all layers<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">April 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/41" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <img src="image/news/322594267-9f92871d-2b24-45f4-8356-ae165bd95789.png" alt="Legend for gauge layer" loading="lazy" />
        </h4>
        <p>
          The legend shows the features in the standard, speed, train protection, electrification and gauge layers. The legend shows only features currently visible on the map, in the same style as the map.
        </p>

        <h4>
          Render French speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">April 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/38" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('speed', 16, 48.728308, 2.26539)">
            <img src="image/news/319311169-92995a76-4883-412b-80f8-1a32678995d6.png" alt="French speed signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged speed signals in France, such as <code>pancarte_Z</code>, <code>TIV-D_O</code>, <code>TIV-D_type_B</code>, <code>TIV-D_type_C</code>, <code>pancarte_R</code> and <code>tableau_P</code>  are rendered in the speed layer.
        </p>

        <h4>
          Render Swedish speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/37" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('speed', 17, 55.61936, 13.047345)">
            <img src="image/news/318295353-e1cf4352-ce68-48b9-973d-47d9f65c75ac.png" alt="Swedish speed signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged speed signals in Sweden, such as <code>hastighetstavla</code>, <code>hastighetstavla med pilspets uppåt</code>, <code>lägre_hastighet</code> and <code>atc_överskridande</code> are rendered in the speed layer.
        </p>

        <h4>
          Render Finnish speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/34" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <img src="image/news/318283746-f184bd10-2030-469d-b9c3-d417c088ff03.png" alt="Finnish speed signals" loading="lazy" />
        </h4>
        <p>
          Tagged speed signals in Finland, such as <code>T-101</code>, <code>T-102</code>, <code>T-110</code> and <code>T-115</code> are rendered in the speed layer.
        </p>

        <h4>
          Render Belgian main signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/33" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('standard', 16, 50.44283, 3.81918)">
            <img src="image/news/318279075-62a15531-3f69-48fd-a646-05f2f0688621.png" alt="Belgian main signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged main signals in Belgium, such as <code>GSA</code>, <code>SAS</code> and <code>PSA</code> are rendered in the speed layer.
        </p>

        <h4>
          Render Belgian speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/32" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('speed', 16, 50.44283, 3.81918)">
            <img src="image/news/318257610-59ce1e98-cfc4-4a23-9711-f045309bf481.png" alt="Belgian speed signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged <code>VIS</code> speed signals in Belgium are rendered in the speed layer.
        </p>

        <h4>
          Render more Austrian speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/26" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <p>
          Tagged speed signals in Austria, such as <code>geschwindigkeitstafel</code>, <code>geschwindigkeitsanzeiger</code>, <code>endsignal</code>, <code>anfangssignal</code>, <code>ankündigungssignal</code>, <code>ankündigung_ek-sicht</code>, <code>ek-sicht_pfeiftafel</code> and <code>geschwindigkeitsvoranzeiger</code> are rendered in the speed layer.
        </p>

        <h4>
          Render Swiss speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/25" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('speed', 16, 47.678155, 8.616085)">
            <img src="image/news/316307137-14a09b72-b508-4fbd-8682-a36556dbdf7a.png" alt="Swiss speed signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged speed signals in Switzerland, such as <code>209</code>, <code>110</code>, <code>211</code>, <code>212</code>, <code>213</code>, <code>214</code>, <code>215</code>, <code>217</code>, <code>540</code>, <code>541</code>, <code>549</code> and <code>569</code> are rendered in the speed layer.
        </p>

        <h4>
          Render Polish speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/24" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
          <a href="javascript:newsLink('speed', 16, 52.214609, 20.937967)">
            <img src="image/news/316301935-a8f380f1-e6be-4126-9f0e-0c34402efcab.png" alt="Polish speed signals" loading="lazy" />
          </a>
        </h4>
        <p>
          Tagged speed signals in Poland, such as <code>w27a</code>, <code>w21</code>, <code>w8</code>, <code>w9</code>, <code>w30</code> and <code>d6</code> are rendered in the speed layer.
        </p>

        <h4>
          Render more German BOStrab speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/23" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <p>
          Tagged tram speed signals in Germany, such as <code>g1a</code>, <code>g2a</code>, <code>g1b</code>, <code>g2b</code>, <code>g4</code> and <code>g5</code> are rendered in the speed layer.
        </p>

        <h4>
          Render more German speed signals<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/21" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <img src="image/news/314231261-56a44ccc-a665-422e-90c8-f6403ff2d606.png" alt="German speed signals" loading="lazy" />
        <p>
          Tagged speed signals in Germany, such as <code>lf1</code>, <code>lf2</code>, <code>lf3</code>, <code>lf4</code>, <code>zs10</code> and <code>zs3v</code> are rendered in the speed layer.
        </p>

        <h4>
          Signal direction<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/14" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <a href="javascript:newsLink('signals', 16.8, 52.514059, 13.336809)">
          <img src="image/news/313425355-49cbe749-3910-4c85-a556-a40a456ca5fd.png" alt="Signal directions" loading="lazy" />
        </a>
        <p>The signals in the train protection, speed and electrification layer show the direction. Signals that can be used in both directions show both directions.</p>

        <h4>
          Gauge layer<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/10" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <a href="javascript:newsLink('gauge', 12.56, 53.67783, 23.86763)">
          <img src="image/news/309562989-5ea345d6-4a42-4e83-bd64-b99e3ff7b056.png" alt="Gauge layer" loading="lazy" />
        </a>
        <p>The gauge layer is built with the same style as the original OpenRailwayMap.</p>

        <h4>
          Electrification layer<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/9" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <a href="javascript:newsLink('electrification', 9.12, 50.7796, 6.377)">
          <img src="image/news/309554930-9fda86bd-4808-49ba-8780-2ad319d8bc5d.png" alt="Electrification layer" loading="lazy" />
        </a>
        <p>The electrification layer is built with the same style as the original OpenRailwayMap.</p>

        <h4>
          Speed layer<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">March 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/7" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <a href="javascript:newsLink('speed', 13.92, 53.54704, 10.01812)">
          <img src="image/news/309497832-ca4a2854-70eb-4a76-8b09-e6c5045ddf88.png" alt="Speed layer" loading="lazy" />
        </a>
        <p>The speed layer is built with the same style as the original OpenRailwayMap.</p>

        <h4>
          Standard layer<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">February 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector/pull/2" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <a href="javascript:newsLink('standard', 12.32, 51.50641, 7.10464)">
          <img src="image/news/309060411-4e091101-8364-43dd-b9fd-9b2599237971.png" alt="Standard layer" loading="lazy" />
        </a>
        <p>The standard layer is built with the same style as the original OpenRailwayMap.</p>

        <h4>
          Fork from OpenRailwayMap<br>
          <small class="text-body-tertiary d-flex">
            <em class="flex-fill">January 2024</em>
            <a href="https://github.com/hiddewie/OpenRailwayMap-vector" target="_blank">
              <div class="github-icon"></div>
            </a>
          </small>
        </h4>
        <p>The Github repository <a href="https://github.com/hiddewie/OpenRailwayMap-vector" target="_blank"><code>hiddewie/OpenRailwayMap-vector</code></a> is forked from <a href="https://github.com/OpenRailwayMap/OpenRailwayMap-CartoCSS" target="_blank"><code>OpenRailwayMap/OpenRailwayMap-CartoCSS</code></a>.</p>
      </div>
    </div>
  </div>
</div>
<div id="legend">
  <div id="legend-map"></div>
</div>
<div id="map-container">
  <div id="background-map"></div>
  <div id="map"></div>
</div>

<script src="js/maplibre-gl-4.7/maplibre-gl.js"></script>
<script src="js/ui.js"></script>
</body>

</html>
